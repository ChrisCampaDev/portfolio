---
interface Props {
  time: string;
  company: string;
  description: string;
  stack?: string[];
  role?: string[];
  location?: string;
  highlights?: string[]; // bullets de logros/responsabilidades
}
const { time, description, company, stack = [], role, location="Cuba", highlights = [] } = Astro.props;
---


<li class="relative mb-10 ml-4">
  <!-- Punto del timeline -->
  <div class="absolute w-3 h-3 bg-blue-500 rounded-full mt-16 -left-3.5 z-10"></div>

  <details class="group overflow-hidden rounded-lg border border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800">
    <summary class="flex w-full cursor-pointer list-none items-start justify-between gap-3 p-5 outline-none transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700">
      <div class="flex-1">
        <time class="block text-sm font-medium leading-none text-gray-700 dark:text-gray-400">{time}</time>
        <h3 class="mt-1 text-lg font-semibold text-gray-900 dark:text-white">{company}{location && ` · ${location}`}</h3>

        {role && (
          <p class="mt-0.5 text-sm text-gray-700 dark:text-gray-300">Cargo ocupado: {role.join(", ")}</p>
        )}
        <p class="mt-3 line-clamp-2 text-base font-normal text-gray-600 dark:text-gray-300 group-open:line-clamp-none">{description}</p>
      </div>
      <!-- Icono de expandir -->
      <span class="mt-1 inline-flex h-6 w-6 flex-none items-center justify-center rounded-md text-gray-600 transition-transform duration-200 group-open:rotate-180 dark:text-gray-300" aria-hidden="true">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-5 w-5">
          <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 011.08 1.04l-4.25 4.25a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
        </svg>
      </span>
    </summary>
    
    <div class="px-5 pb-5 pt-0">
      <h6 class="mt-1 text-sm font-semibold text-gray-900 dark:text-white">Habilidades</h6>
      {highlights.length > 0 && (
        <ul class="mb-4 ms-4 list-disc space-y-1 text-gray-700 dark:text-gray-300">
          {highlights.map((h) => (
            <li>{h}</li>
          ))}
        </ul>
      )}

      {stack.length > 0 && (
          <h6 class="mt-1 text-sm font-semibold text-gray-900 dark:text-white">Tecnologías usadas</h6>
          <div class="mt-2">
          <ul class="flex flex-wrap gap-2">
            {stack.map((s) => (
              <li class="rounded-full bg-blue-600/90 px-3 py-1 text-xs font-medium text-white shadow-sm ring-1 ring-blue-600/30">{s}</li>
            ))}
          </ul>
        </div>
      )}
    </div>
  </details>
</li>
